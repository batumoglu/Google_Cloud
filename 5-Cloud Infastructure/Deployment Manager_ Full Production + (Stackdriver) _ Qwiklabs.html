<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html lang="en" class="mdl-js"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/caff0d62ed"></script><script src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/nr-1158.min.js.download"></script><script type="text/javascript" async="" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/js"></script><script type="text/javascript" async="" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/analytics.js.download"></script><script type="text/javascript" async="" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/d58fn3dh7i2n.js.download"></script><script type="text/javascript" async="" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/analytics.min.js.download"></script><script type="text/javascript" id="www-widgetapi-script" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/www-widgetapi.js.download" async=""></script><script>window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","errorBeacon":"bam.nr-data.net","licenseKey":"caff0d62ed","applicationID":"29451451","transactionName":"IQ1XRUEOVV1dFxlRXAEXSlRATkpZVxI=","queueTime":0,"applicationTime":172,"agent":""}</script>
<script>(window.NREUM||(NREUM={})).loader_config={licenseKey:"caff0d62ed",applicationID:"29451451"};window.NREUM||(NREUM={}),__nr_require=function(n,e,t){function r(t){if(!e[t]){var i=e[t]={exports:{}};n[t][0].call(i.exports,function(e){var i=n[t][1][e];return r(i||e)},i,i.exports)}return e[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<t.length;i++)r(t[i]);return r}({1:[function(n,e,t){function r(){}function i(n,e,t){return function(){return o(n,[u.now()].concat(f(arguments)),e?null:this,t),e?void 0:this}}var o=n("handle"),a=n(4),f=n(5),c=n("ee").get("tracer"),u=n("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",l=d+"ixn-";a(p,function(n,e){s[e]=i(d+e,!0,"api")}),s.addPageAction=i(d+"addPageAction",!0),s.setCurrentRouteName=i(d+"routeName",!0),e.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(n,e){var t={},r=this,i="function"==typeof e;return o(l+"tracer",[u.now(),n,t],r),function(){if(c.emit((i?"":"no-")+"fn-start",[u.now(),r,i],t),i)try{return e.apply(this,arguments)}catch(n){throw c.emit("fn-err",[arguments,this,n],t),n}finally{c.emit("fn-end",[u.now()],t)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(n,e){m[e]=i(l+e)}),newrelic.noticeError=function(n,e){"string"==typeof n&&(n=new Error(n)),o("err",[n,u.now(),!1,e])}},{}],2:[function(n,e,t){function r(n,e){var t=n.getEntries();t.forEach(function(n){"first-paint"===n.name?a("timing",["fp",Math.floor(n.startTime)]):"first-contentful-paint"===n.name&&a("timing",["fcp",Math.floor(n.startTime)])})}function i(n){if(n instanceof c&&!s){var e,t=Math.round(n.timeStamp);e=t>1e12?Date.now()-t:f.now()-t,s=!0,a("timing",["fi",t,{type:n.type,fid:e}])}}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var o,a=n("handle"),f=n("loader"),c=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){o=new PerformanceObserver(r);try{o.observe({entryTypes:["paint"]})}catch(u){}}if("addEventListener"in document){var s=!1,p=["click","keydown","mousedown","pointerdown","touchstart"];p.forEach(function(n){document.addEventListener(n,i,!1)})}}},{}],3:[function(n,e,t){function r(n,e){if(!i)return!1;if(n!==i)return!1;if(!e)return!0;if(!o)return!1;for(var t=o.split("."),r=e.split("."),a=0;a<r.length;a++)if(r[a]!==t[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var f=navigator.userAgent,c=f.match(a);c&&f.indexOf("Chrome")===-1&&f.indexOf("Chromium")===-1&&(i="Safari",o=c[1])}e.exports={agent:i,version:o,match:r}},{}],4:[function(n,e,t){function r(n,e){var t=[],r="",o=0;for(r in n)i.call(n,r)&&(t[o]=e(r,n[r]),o+=1);return t}var i=Object.prototype.hasOwnProperty;e.exports=r},{}],5:[function(n,e,t){function r(n,e,t){e||(e=0),"undefined"==typeof t&&(t=n?n.length:0);for(var r=-1,i=t-e||0,o=Array(i<0?0:i);++r<i;)o[r]=n[e+r];return o}e.exports=r},{}],6:[function(n,e,t){e.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(n,e,t){function r(){}function i(n){function e(n){return n&&n instanceof r?n:n?c(n,f,o):o()}function t(t,r,i,o){if(!d.aborted||o){n&&n(t,r,i);for(var a=e(i),f=v(t),c=f.length,u=0;u<c;u++)f[u].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function l(n,e){h[n]=v(n).concat(e)}function m(n,e){var t=h[n];if(t)for(var r=0;r<t.length;r++)t[r]===e&&t.splice(r,1)}function v(n){return h[n]||[]}function g(n){return p[n]=p[n]||i(t)}function w(n,e){u(n,function(n,t){e=e||"feature",y[t]=e,e in s||(s[e]=[])})}var h={},y={},b={on:l,addEventListener:l,removeEventListener:m,emit:t,get:g,listeners:v,context:e,buffer:w,abort:a,aborted:!1};return b}function o(){return new r}function a(){(s.api||s.feature)&&(d.aborted=!0,s=d.backlog={})}var f="nr@context",c=n("gos"),u=n(4),s={},p={},d=e.exports=i();d.backlog=s},{}],gos:[function(n,e,t){function r(n,e,t){if(i.call(n,e))return n[e];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(n,e,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return n[e]=r,r}var i=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(n,e,t){function r(n,e,t,r){i.buffer([n],r),i.emit(n,e,t)}var i=n("ee").get("handle");e.exports=r,r.ee=i},{}],id:[function(n,e,t){function r(n){var e=typeof n;return!n||"object"!==e&&"function"!==e?-1:n===window?0:a(n,o,function(){return i++})}var i=1,o="nr@id",a=n("gos");e.exports=r},{}],loader:[function(n,e,t){function r(){if(!x++){var n=E.info=NREUM.info,e=l.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(n&&n.licenseKey&&n.applicationID&&e))return s.abort();u(y,function(e,t){n[e]||(n[e]=t)}),c("mark",["onload",a()+E.offset],null,"api");var t=l.createElement("script");t.src="https://"+n.agent,e.parentNode.insertBefore(t,e)}}function i(){"complete"===l.readyState&&o()}function o(){c("mark",["domContent",a()+E.offset],null,"api")}function a(){return O.exists&&performance.now?Math.round(performance.now()):(f=Math.max((new Date).getTime(),f))-E.offset}var f=(new Date).getTime(),c=n("handle"),u=n(4),s=n("ee"),p=n(3),d=window,l=d.document,m="addEventListener",v="attachEvent",g=d.XMLHttpRequest,w=g&&g.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:g,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var h=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1158.min.js"},b=g&&w&&w[m]&&!/CriOS/.test(navigator.userAgent),E=e.exports={offset:f,now:a,origin:h,features:{},xhrWrappable:b,userAgent:p};n(1),n(2),l[m]?(l[m]("DOMContentLoaded",o,!1),d[m]("load",r,!1)):(l[v]("onreadystatechange",i),d[v]("onload",r)),c("mark",["firstbyte",f],null,"api");var x=0,O=n(6)},{}],"wrap-function":[function(n,e,t){function r(n){return!(n&&n instanceof Function&&n.apply&&!n[a])}var i=n("ee"),o=n(5),a="nr@original",f=Object.prototype.hasOwnProperty,c=!1;e.exports=function(n,e){function t(n,e,t,i){function nrWrapper(){var r,a,f,c;try{a=this,r=o(arguments),f="function"==typeof t?t(r,a):t||{}}catch(u){d([u,"",[r,a,i],f])}s(e+"start",[r,a,i],f);try{return c=n.apply(a,r)}catch(p){throw s(e+"err",[r,a,p],f),p}finally{s(e+"end",[r,a,c],f)}}return r(n)?n:(e||(e=""),nrWrapper[a]=n,p(n,nrWrapper),nrWrapper)}function u(n,e,i,o){i||(i="");var a,f,c,u="-"===i.charAt(0);for(c=0;c<e.length;c++)f=e[c],a=n[f],r(a)||(n[f]=t(a,u?f+i:i,o,f))}function s(t,r,i){if(!c||e){var o=c;c=!0;try{n.emit(t,r,i,e)}catch(a){d([a,t,r,i])}c=o}}function p(n,e){if(Object.defineProperty&&Object.keys)try{var t=Object.keys(n);return t.forEach(function(t){Object.defineProperty(e,t,{get:function(){return n[t]},set:function(e){return n[t]=e,e}})}),e}catch(r){d([r])}for(var i in n)f.call(n,i)&&(e[i]=n[i]);return e}function d(e){try{n.emit("internal-error",e)}catch(t){}}return n||(n=i),t.inPlace=u,t.flag=a,t}},{}]},{},["loader"]);</script>
<meta content="[]" name="active-experiments">
<meta content="{&quot;userId&quot;:2332914}" name="help-api-product-data">
<meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="LL2EkfitxGQsfbXMnRz+hoFBMAgYVH3EPNkWYgbdxDfHz751h/tFO1b6fIKPsr9pmlGcvfsPPP86kJ9NZTGW+g==">
<title>Deployment Manager: Full Production + (Stackdriver) | Qwiklabs</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0" name="viewport">
<meta content="In this lab you will use Deployment Manager to launch a highly available, scalable, reliable, resilient service. You will monitor it using Stackdriver. You will set up basic black box monitoring,  uptime check alert notification and dashboard." name="description">
<meta content="Qwiklabs" name="author">
<meta content="1rRsY0INj8RvwB5EF5pwdxt2A2P9aDgAlsICaJ0d5w0" name="google-site-verification">
<meta content="Deployment Manager: Full Production + (Stackdriver) | Qwiklabs" property="og:title">
<meta content="website" property="og:type">
<meta content="/favicon-144.png" property="og:image">
<meta content="Qwiklabs" property="og:site_name">
<meta content="In this lab you will use Deployment Manager to launch a highly available, scalable, reliable, resilient service. You will monitor it using Stackdriver. You will set up basic black box monitoring,  uptime check alert notification and dashboard." property="og:description">
<meta content="/qwiklabs_logo_900x887.png" property="og:logo" size="900x887">
<meta content="/qwiklabs_logo_994x187.png" property="og:logo" size="994x187">
<meta content="#3681E4" property="msapplication-TileColor">
<meta content="/favicon-144.png" property="msapplication-TileImage">
<link href="https://googlecoursera.qwiklabs.com/favicon-32.png" rel="shortcut icon">
<link color="#3681E4" href="https://googlecoursera.qwiklabs.com/favicon-svg.svg" rel="mask-icon">
<link href="https://googlecoursera.qwiklabs.com/favicon-180.png" rel="apple-touch-icon-precomposed">
<link rel="stylesheet" media="screen" href="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/css">


<!--[if lt IE 9]>
<script src='http://html5shim.googlecode.com/svn/trunk/html5.js' type='text/javascript'></script>
<![endif]-->
<!--[endif]>  <![endif]-->
<script>
//<![CDATA[
window.gon={};gon.current_user={"firstname":"Ozkan","lastname":"Batumoglu","fullname":"Ozkan Batumoglu","company":"Coursera","email":"batumoglu@hotmail.com","origin":"googlecoursera-run, lti-coursera","subscriptions":0,"id":"54eb7d21170356f2189321bcd774d847","qlCreatedAt":"2019-12-25 11:42:16 UTC","optIn":null};gon.segment="j4Im8pqIko0Lxq4wVVZWMPMM0EroHUvb";gon.deployment="googlecoursera-run";
//]]>
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "WebSite",
  "url": "https://www.qwiklabs.com/",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://www.qwiklabs.com/catalog?keywords={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
<script id="ze-snippet" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/snippet.js.download"></script><script type="text/javascript" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/asset_composer.5d2cd6d9613b85125812.js.download" charset="utf-8" async=""></script>



<link rel="stylesheet" media="all" href="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/application-a53cf05bc9e39a99a1d6fa14f486d7ecec091bb67f0aca5b1257120cbf85ec76.css">
<script>
  EVENT_SOURCE_BASE_URL = "https://googlecoursera-run.qwiklabs.com/nchan-sub?id=";
</script>
<script src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/webcomponents-loader.js.download"></script>
<script src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/hallofmirrors-be0d892c0367747b0944b86f0f57a4ce814e112458e6c8594b7025116178939c.js.download"></script><script async="" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/lazy.min.js.download"></script>
<script src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/iframe_api"></script>
<script src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/vendor-45d462772c30000424907184f70c7157e95fb6227698d1671c5051818a6f60d8.js.download"></script>
<script src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/application-f4e49afad3828ebf1962f98490d8377a89247353044ebf5a7f447c3cc62c1dcd.js.download"></script>
</head>
<body class="focuses focuses-show lab-show l-full no-nav">
<div class="header-container">
<div class="header">
<a class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect header__button header__button--nav header__nav-panel-button js-nav-toggle" data-upgraded=",MaterialButton,MaterialRipple">
<i class="material-icons">menu</i>
<span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></a>
<div class="header__title">
<a class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect header__button header__button--nav" href="https://www.coursera.org/" data-upgraded=",MaterialButton,MaterialRipple"><ql-icon>arrow_back</ql-icon><span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></a>

<h1 class="headline-5">
Deployment Manager: Full Production + (Stackdriver)
</h1>
</div>
<div class="header__actions">
<a class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect header__button header__button--action header__button--search js-header-search-bar-button" data-upgraded=",MaterialButton,MaterialRipple">
<i class="material-icons">search</i>
<span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></a>

<ql-help context="lab" productdata="{&quot;userId&quot;:2332914}" data-analytics-action="opened_help" data-analytics-label="lab"></ql-help>
<a class="header-my-account-button mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect js-my-account-button" data-upgraded=",MaterialButton,MaterialRipple">
<img class="avatar " src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/527aaaf240e6e7ef6a272c7f9743d396.png">
<span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></a>
<div class="header-my-account-menu js-my-account-menu">
<div class="card elevation-2 no-padding">
<div class="my-account-menu__top">
<img class="avatar " src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/527aaaf240e6e7ef6a272c7f9743d396.png">
<div class="my-account-menu__info">
<h4 class="subtitle-headline-1">
Ozkan Batumoglu
</h4>
<p class="body-2 text--gray">
<span>batumoglu@hotmail.com</span>
</p>
<a class="button" href="https://googlecoursera.qwiklabs.com/my_account/profile">My Account</a>
</div>
</div>
<div class="my-account-menu__bottom">
<a class="text--green subtitle-headline-2" href="https://googlecoursera.qwiklabs.com/my_account/credits">0 Credits
</a><a data-analytics-action="clicked_sign_out" class="button button--hairline" rel="nofollow" data-method="delete" href="https://googlecoursera.qwiklabs.com/users/sign_out">Sign Out</a>
</div>
</div>
</div>

</div>
</div>
<div class="header__search-bar js-header-search-bar">
<form id="catalog-search-mobile" onsubmit="ql.catalogSearchFilter(); return false;" action="https://googlecoursera.qwiklabs.com/searches/elasticsearch" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="LL2EkfitxGQsfbXMnRz+hoFBMAgYVH3EPNkWYgbdxDfHz751h/tFO1b6fIKPsr9pmlGcvfsPPP86kJ9NZTGW+g==">
<input type="text" name="keywords" id="keywords" placeholder="Search" maxlength="255">
</form>

<a class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect header__button" data-upgraded=",MaterialButton,MaterialRipple">
<i class="material-icons">close</i>
<span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></a>
</div>
</div>

<nav class="nav-bar">
<a class="nav-bar__item js-navigation-button" href="https://googlecoursera.qwiklabs.com/"><ql-icon class="nav-bar__item__icon">
home
</ql-icon>
<span class="nav-bar__item__label">
Home
</span>
</a>
<a class="nav-bar__item js-navigation-button" href="https://googlecoursera.qwiklabs.com/catalog"><ql-icon class="nav-bar__item__icon">
school
</ql-icon>
<span class="nav-bar__item__label">
Catalog
</span>
</a>
<a class="nav-bar__item js-navigation-button" href="https://googlecoursera.qwiklabs.com/my_learning"><ql-icon class="nav-bar__item__icon">
event_note
</ql-icon>
<span class="nav-bar__item__label">
My Learning
</span>
</a>
</nav>

<nav class="nav-panel js-nav-panel">
<div class="nav-panel__logo">
<div class="logo logo--blue"></div>
</div>
<a title="Home" tabindex="-1" class="nav-panel__item js-navigation-button" href="https://googlecoursera.qwiklabs.com/"><ql-icon class="nav-panel__item__icon">
home
</ql-icon>
<div class="nav-panel__item__label">
Home
</div>
</a>
<a title="Catalog" tabindex="-1" class="nav-panel__item js-navigation-button" href="https://googlecoursera.qwiklabs.com/catalog"><ql-icon class="nav-panel__item__icon">
school
</ql-icon>
<div class="nav-panel__item__label">
Catalog
</div>
</a>
<a title="My Learning" tabindex="-1" class="nav-panel__item js-navigation-button" href="https://googlecoursera.qwiklabs.com/my_learning"><ql-icon class="nav-panel__item__icon">
event_note
</ql-icon>
<div class="nav-panel__item__label">
My Learning
</div>
</a>
<div class="nav-panel__spacer"></div>
<a title="Profile" tabindex="-1" class="nav-panel__item js-navigation-button" href="https://googlecoursera.qwiklabs.com/my_account/profile"><ql-icon class="nav-panel__item__icon">
account_circle
</ql-icon>
<div class="nav-panel__item__label">
Profile
</div>
</a>
<a title="Credits &amp; Subscriptions" tabindex="-1" class="nav-panel__item js-navigation-button" href="https://googlecoursera.qwiklabs.com/my_account/credits"><ql-icon class="nav-panel__item__icon">
money
</ql-icon>
<div class="nav-panel__item__label">
Credits &amp; Subscriptions
</div>
</a>
<a title="Security" tabindex="-1" class="nav-panel__item js-navigation-button" href="https://googlecoursera.qwiklabs.com/my_account/security"><ql-icon class="nav-panel__item__icon">
security
</ql-icon>
<div class="nav-panel__item__label">
Security
</div>
</a>
<div class="nav-panel__spacer"></div>
<a class="nav-panel__item" tabindex="-1" href="https://googlecoursera.qwiklabs.com/focuses/16469#"><ql-help>
<div class="nav-panel__help-item">
<ql-icon class="nav-panel__item__icon">help</ql-icon>
<div class="nav-panel__item__label">Help</div>
</div>
</ql-help>
</a><div class="nav-panel__small-links">
<a tabindex="-1" href="https://googlecoursera.qwiklabs.com/privacy_policy">Privacy</a>
<a tabindex="-1" href="https://googlecoursera.qwiklabs.com/terms_of_service">Terms</a>
</div>
</nav>
<div class="nav-panel__overlay js-nav-toggle"></div>

<main class="js-main">
<span class="hidden" id="flash-sibling-before"></span>

<div class="l-main-wrapper" id="main-wrapper">







<div class="js-lab-state" data-analytics-payload="{&quot;label&quot;:&quot;Deployment Manager: Full Production + (Stackdriver)&quot;,&quot;lab_name&quot;:&quot;Deployment Manager: Full Production + (Stackdriver)&quot;,&quot;classroom_name&quot;:null,&quot;deployment&quot;:&quot;googlecoursera-run&quot;}" data-focus-id="16469" data-lab-billing-limit="0.0" data-lab-duration="5400" data-parent="classroom"></div>
<ql-lab-control-panel class="js-lab-control-panel l-lab-control-panel" connectiondetails="[]" connectionfiles="[]" labcontrolbutton="{&quot;disabled&quot;:false,&quot;pending&quot;:false,&quot;running&quot;:false}" labtimer="{&quot;ticking&quot;:false,&quot;secondsRemaining&quot;:5400}" studentresources="[]"></ql-lab-control-panel>
<div class="l-lab-main-body">
<div class="js-lab-content lab-content">
<div class="alert alert--fake js-alert">
<p class="alert__message js-alert-message"></p>
<a class="alert__close js-alert-close">
<i class="fa fa-times"></i>
</a>
<iframe class="l-ie-iframe-fix" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/saved_resource.html"></iframe>
</div>
<div class="lab-content__markdown-wrapper">
<div class="lab-preamble">
<h1 class="lab-preamble__title">
Deployment Manager: Full Production + (Stackdriver)
</h1>
<div class="lab-preamble__details subtitle-headline-1">
<span>1 hour 30 minutes</span>
<span>1 Credit</span>
<div class="lab__rating">
<a href="https://googlecoursera.qwiklabs.com/focuses/16469/reviews?parent=catalog"><div class="rateit" data-rateit-readonly="true" data-rateit-value="4.2943"><div class="rateit-reset" style="display: none;"></div><div class="rateit-range" style="width: 80px; height: 16px;"><div class="rateit-selected" style="height: 16px; width: 68.7088px;"></div><div class="rateit-hover" style="height:16px"></div></div></div>

</a><a data-target="#lab-review-modal" data-toggle="modal">
Rate Lab
</a>
</div>
</div>
</div>

<div class="lab-content__inner-wrapper">
<div class="js-markdown-instructions lab-content__markdown markdown-lab-instructions" id="markdown-lab-instructions">



<h2 id="step1">Overview</h2>
<p>In this lab you will...</p>
<ol>
<li>
<p>Install an advanced deployment using Deployment Manager sample templates.</p>
</li>
<li>
<p>Enable Stackdriver monitoring.</p>
</li>
<li>
<p>Configure Stackdriver Uptime Checks and Notifications.</p>
</li>
<li>
<p>Configure a Stackdriver Dashboard with two charts, showing CPU and Received packets.</p>
</li>
<li>
<p>Perform a load test and simulate a service outage.</p>
</li>
</ol>
<h2 id="step2">Objectives</h2>
<p>In this lab, you will learn to:</p>
<ul>
<li>
<p>Launch a cloud service from a collection of templates.</p>
</li>
<li>
<p>Configure basic <strong>black box</strong> monitoring of an application.</p>
</li>
<li>
<p>Create an uptime check to recognize a loss of service.</p>
</li>
<li>
<p>Establish an alerting policy to trigger incident response procedures.</p>
</li>
<li>
<p>Create and configure a dashboard with dynamically update charts.</p>
</li>
<li>
<p>Test the monitoring and alerting regimen by applying a load  to the service.</p>
</li>
<li>
<p>Test the monitoring and alerting regimen by simulating a service outage.</p>
</li>
</ul>
<h2 id="step3">Full Production</h2>
<p>Mechanically, the actions you will perform in this lab are almost identical to the previous lab, with a few differences. But look at the deployment you are launching:</p>
<p><img alt="117eedcaddec5e53.png" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/EUMym+IU2gsVJ_LenEDCSeMEwVjemzascekNhyp4QRU="></p>
<p>This deployment and the sample templates employ many of the best practices you have learned about throughout this class. It doesn't build just a single load balancer, but two of them. One for static content and another for dynamic content. Separating the workloads in this way allows the static and dynamic content to scale independently, making for a more cost optimized solution.</p>
<p>Both the dynamic and the static content are served by TWO managed instance groups so that if one group is lost, the other can resume.  So this is a highly reliable and resilient design.</p>
<p>Finally, the system state information is pushed into a back-end Cloud SQL server. Do you know why there isn't a separate Cloud SQL server in a different zone performing replication?</p>
<p>Because the number of servers  you are starting will reach the 8-server quota limit established in the Qwiklabs lab accounts!</p>
<p>Oh -- and this is a Logbook application.</p>
<h2 id="step4">Clone the Deployment Manager sample templates</h2>
<p>Google provides a robust set of sample Deployment Manager templates that you can learn from and build upon.</p>
<h3><strong>Clone the repo.</strong></h3>
<p>In the GCP Console, to open Cloud Shell, click <strong>Activate Cloud Shell</strong> ( <img alt="54fc287f71fa86e5.png" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/xNWRMYx6jp2JT+IjCnWDLsvKuhz6HsZt7uvXoipGNxg=">). If prompted, click <strong>Start Cloud Shell</strong>.</p>
<p><img alt="6d5d6f01c3d7a80.png" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/cK0lEnuiLY7l+02W0tn1_5l_GbnsoWlRU7+CAAFpw0w="></p>
<p>Open the <strong>Cloud Shell Code Editor</strong>. You will be using it to create and edit the template file, and the other tab to interrogate the environment for values you'll need to specify in the template. The controls you need to open the editor may be off screen to the right. You will need to close the Navigation menu to see the controls.</p>
<p><img alt="c2dd578bf4751e56.png" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/e6oEeQ_LnP0xm+CUCiRn2qMLgK2c3pD7m1FD4_rmuMc="></p>
<p>The control looks like a pencil. This is how you launch the Cloud Shell Code Editor.</p>
<p><img alt="c2912a36941d30da.png" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/2zRnkqfcLMoxjHDd6YbQvVQeJJDkP7Vclrdvuin1R3k="></p>
<p>In Cloud Shell Command Line, create a directory to hold the Deployment Manager sample templates and change into that directory.</p>
<pre><code>mkdir ~/dmsamples
cd ~/dmsamples
</code><button class="button button--copy js-copy-button-0"><i class="fa fa-clipboard"></i></button></pre>
<p>Clone the repository.</p>
<pre><code>git clone https://github.com/GoogleCloudPlatform/deploymentmanager-samples.git
</code><button class="button button--copy js-copy-button-1"><i class="fa fa-clipboard"></i></button></pre>
<h3><strong>About the tutorials</strong></h3>
<p>There are several step-by-step tutorials in the documentation. They are located here:</p>
<p><a href="https://cloud.google.com/deployment-manager/docs/tutorials">https://cloud.google.com/deployment-manager/docs/tutorials</a></p>
<p>This lab is based on one of those tutorials, but includes additional content. The Deployment Manager template you will use generates an advanced HTTP(S) Load Balanced deployment for a Logbook sample application. The samples are available in both Jinja and Python. This lab uses the Python version of the templates.</p>
<p><a href="https://cloud.google.com/deployment-manager/docs/create-advanced-http-load-balanced-deployment">https://cloud.google.com/deployment-manager/docs/create-advanced-http-load-balanced-deployment</a></p>
<h2 id="step5">Explore the sample files</h2>
<p>There are many sample templates in the directory.</p>
<h3><strong>List the example templates.</strong></h3>
<p>Locate the version 2 examples and list them.</p>
<pre><code>cd ~/dmsamples/deploymentmanager-samples/examples/v2
ls
</code><button class="button button--copy js-copy-button-2"><i class="fa fa-clipboard"></i></button></pre>
<p>You should see something like this:</p>
<h4><strong>Example (don't copy)</strong></h4>
<aside class="special"><p><code>bigtable cloud_router container_vm htcondor image_based_igm internal_lb_haproxy nodejs_l7 regional_igm ssl vm_startup_script  waiter build_configuration common gke iam instance_pool metadata_from_file project_creation saltstack step_by_step_guide vm_with_disks cloud_functions container_igm ha-service igm-updater internal_lb nodejs quick_start single_vm template_modules vpn_auto_subnet</code></p>
</aside>
<p>Not all of the subdirectories are independent projects. For example, the directory named <strong>common</strong> contains templates that are used by several of the other projects. If you are studying independently later, use the README files as a guide.</p>
<p>The application you will build in this lab is contained in the <strong>nodejs_l7</strong> directory. Note that there is a <strong>nodejs</strong> directory and a <strong>nodejs_l7</strong> directory, you will use the one <em>with</em> L7.</p>
<p>L7 means network  layer 7 load balancing.</p>
<p><a href="https://cloud.google.com/deployment-manager/docs/create-advanced-http-load-balanced-deployment">https://cloud.google.com/deployment-manager/docs/create-advanced-http-load-balanced-deployment</a></p>
<p><a href="https://cloud.google.com/deployment-manager/images/http-load-balanced-diagram.svg">https://cloud.google.com/deployment-manager/images/http-load-balanced-diagram.svg</a></p>
<h3><strong>List and examine the NodeJS_l7  deployment.</strong></h3>
<p>Locate the version 2 examples and list them.</p>
<pre><code>cd nodejs_l7/python
ls
</code><button class="button button--copy js-copy-button-3"><i class="fa fa-clipboard"></i></button></pre>
<p>You should see something like this:</p>
<h4><strong>Example (don't copy)</strong></h4>
<aside class="special"><p><code>application.py  application.py.schema  application.yaml  autoscaled_group.py  autoscaled_group.py.schema  service.py  service.py.schema</code></p>
</aside>
<ul>
<li>application.py</li>
<li>application.py.schema</li>
<li>Unifies the frontend and backend and defines additional resources.</li>
<li>A static service with primary and secondary managed instance groups that serves a static webpage.</li>
<li>A URL Map resource that maps different URLs to their correct paths, default or static.</li>
<li>A global forwarding rule that provides a single external IP address.</li>
<li>A firewall rule that allows traffic through port 8080.</li>
<li>service.py</li>
<li>service.py.schema</li>
<li>Creates the application frontend.</li>
<li>Creates two managed instance groups, one primary and one secondary, using the autoscaled_group.py template</li>
<li>Creates the backend service including health checker.</li>
<li>autoscaled_group.py</li>
<li>autoscaled_group.py.schema</li>
<li>Creates an autoscaled managed instance group using the common container_instance_template.py</li>
</ul>
<p>The above application-specific templates make use of several common templates that are used with other deployments.</p>
<ul>
<li>
<p>/common/python/container_instance_template.py</p>
</li>
<li>
<p>/common/python/container_vm.py</p>
</li>
<li>
<p>/common/python/container_helper.py</p>
</li>
</ul>
<h2 id="step6">Customize the deployment</h2>
<p>Google provides a robust set of sample Deployment Manager templates that you can learn from and build upon.</p>
<h3><strong>Specify the zone and secondary zone.</strong></h3>
<p>The application.yaml file requires a primary zone and a secondary zone.</p>
<p>You can find the list of zones in Cloud Shell Command Line by entering:</p>
<pre><code>gcloud compute zones list
</code><button class="button button--copy js-copy-button-4"><i class="fa fa-clipboard"></i></button></pre>
<p>Use Cloud Shell Code Editor to edit <strong>application.yaml</strong> in <code>~/dmsamples/deploymentmanager-samples/examples/v2/nodejs_l7/python</code></p>
<p>and replace <code>ZONE_TO_RUN</code> and <code>SECOND_ZONE_TO_RUN</code> with zones of your choosing.</p>
<p><strong>application.yaml</strong></p>
<pre><code>resources:
- name: nodejs
  type: application.py
  properties:
    primaryZone: ZONE_TO_RUN
    secondaryZone: SECOND_ZONE_TO_RUN
    backendImage: gcr.io/deployment-manager-examples/mysql
    frontendImage: gcr.io/deployment-manager-examples/nodejsservice
    staticImage: gcr.io/deployment-manager-examples/nodejsservicestatic
</code><button class="button button--copy js-copy-button-5"><i class="fa fa-clipboard"></i></button></pre>
<h2 id="step7">Run the application</h2>
<p>The application will not be operational until several steps are completed. First, you will use Deployment Manager to deploy the application. That will build the infrastructure but it won't initially allow traffic to begin. After the infrastructure is setup, you will apply service labels.</p>
<h3><strong>Deploy the application</strong></h3>
<ol>
<li>
<p>Name the application and pass Deployment Manager the configuration file.</p>
</li>
</ol>
<pre><code>gcloud deployment-manager deployments create advanced-configuration --config application.yaml
</code><button class="button button--copy js-copy-button-6"><i class="fa fa-clipboard"></i></button></pre>
<h3>Verify that the application is open for traffic</h3>
<ul>
<li>On the <strong>Navigation menu</strong>, click  <strong>VPC Network</strong> &gt; <strong>Firewall rules</strong>.</li>
<li>The Deployment Manager template should have already created a firewall rule to allow traffic from TCP 8080.</li>
</ul>
<p><strong>If you don't have already created firewall rule to allow traffic from tcp:8080 then create a firewall rule by using following instructions:</strong></p>
<ul>
<li>Create a firewall rule that opens tcp:8080 for the service.</li>
<li>On the <strong>Navigation menu</strong>, click  <strong>VPC Network</strong> &gt; <strong>Firewall rules</strong>
</li>
<li>Click on <strong>Create Firewall Rule</strong> and specify the following:</li>
</ul>
<table>
<tbody><tr>
<td colspan="1" rowspan="1">
<p><strong>Property</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>Value</strong></p>
<p>(type value or select option as specified)</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Name</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>allow-8080</strong></p>
</td>
</tr>
<tr><td colspan="1" rowspan="1">
<p>Description</p>
</td></tr>
<tr>
<td colspan="1" rowspan="1">
<p>Network</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>default</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Priority</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>1000</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Direction of traffic</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>Ingress</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Action on match</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>Allow</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Targets</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>All instances in the network</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Source filter</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>IP ranges</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Source IP ranges</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>0.0.0.0/0</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Protocols and ports</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>Specified protocols and ports</strong></p>
<p><strong>Check tcp and enter 8080</strong></p>
</td>
</tr>
</tbody></table>
<p>Click <strong>Create</strong>.</p>
<h2 id="step8">Verify that the application is operational</h2>
<p>The application takes a few minutes to start. You can view it in the Deployment Manager part of Console or you can see the instances in the Compute Engine part of Console. The application is accessible on port 8080 at a global IP address. Unfortunately, The IP address was established dynamically when the global forwarding rule was implemented by the Deployment Manager templates, so you don't know the application's IP address. And you will need that address to test the application.</p>
<h3><strong>Find the global load balancer forwarding rule IP address</strong></h3>
<p>Find the Forwarding IP address.</p>
<pre><code>gcloud compute forwarding-rules list
</code><button class="button button--copy js-copy-button-7"><i class="fa fa-clipboard"></i></button></pre>
<p>Open a browser and view port 8080</p>
<pre><code>http://&lt;your forwarding IP&gt;:8080
</code><button class="button button--copy js-copy-button-8"><i class="fa fa-clipboard"></i></button></pre>
<p>It may take several minutes for the service to become operational. If you get an error, such as a 404, wait about two minutes and try again. When you get a blank page, you may proceed to enter log information and view it.</p>
<p>Create several log entries by calling this repeatedly with different messages.</p>
<pre><code>http://&lt;your forwarding IP&gt;:8080/?msg=enter-a-message
</code><button class="button button--copy js-copy-button-9"><i class="fa fa-clipboard"></i></button></pre>
<p>View the log entries:</p>
<pre><code>http://&lt;your forwarding IP&gt;:8080/
</code><button class="button button--copy js-copy-button-10"><i class="fa fa-clipboard"></i></button></pre>
<h2 id="step9">Enable monitoring for the project</h2>
<p>Now that the application is running, you will setup Stackdriver Alerts and some Stackdriver dashboards.</p>
<h3>Create a Stackdriver workspace</h3>
<p>To use Stackdriver, your project must be in a Stackdriver account. The following steps create a new account that has a free trial of Stackdriver.</p>
<ol>
<li>
<p>In the Google Cloud Platform Console, click on <strong>Navigation menu</strong> &gt; <strong>Monitoring</strong>. Sign in with the credentials for this lab.</p>
</li>
<li>
<p>Click <strong>NO THANKS!</strong> to trying the beta version of Stackdriver Monitoring.</p>
</li>
</ol>
<p><img alt="beta-option.png" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/w+xXEqnAeINyEHwFyrUrDDWA7Zi0bviJOs3dM_5EQEQ="></p>
<p>When the Stackdriver dashboard opens your Stackdriver workspace is ready.</p>

<h2 id="step10">Configure an uptime check and alert policy for the application.</h2>
<p>Now that the application is running, you will setup Stackdriver Alerts and some Stackdriver dashboards.</p>
<h3><strong>Configure an Uptime Check</strong></h3>
<ol>
<li>On the Stackdriver window or tab, click on <strong>Uptime Checks</strong> menu, click <strong>Uptime Checks Overview</strong>. Click on <strong>Add Uptime Check</strong>.</li>
<li>Specify the following:</li>
</ol>
<table>
<tbody><tr>
<td colspan="1" rowspan="1">
<p><strong>Property</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>Value</strong></p>
<p>(type value or select option as specified)</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Title</p>
</td>
<td colspan="1" rowspan="1">
<p>&lt; give the suitable name of Uptime Check &gt;</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Check Type</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>HTTP</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Resource Type</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>URL</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Hostname</p>
</td>
<td colspan="1" rowspan="1">
<p>&lt; your forwarding IP &gt;</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Path</p>
</td>
<td colspan="1" rowspan="1">
<p>&lt; leave blank &gt;</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Check Every</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>1 minute</strong></p>
</td>
</tr>
</tbody></table>
<ol start="3">
<li>Click <strong>Advanced Options</strong> and specify the following, leaving the remaining settings at the default values.</li>
</ol>
<table>
<tbody><tr>
<td colspan="1" rowspan="1">
<p>Port</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>8080</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Locations</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>Global</strong></p>
</td>
</tr>
</tbody></table>
<ol start="4">
<li>
<p>Click <strong>Test</strong>. If the test fails, make sure that the service is still working. Also check to see that the firewall rule exists and is correct. If the test succeeds, click <strong>Save</strong>.</p>
</li>
<li>
<p>After the Uptime Check is saved, Stackdriver will offer to create an alerting policy.</p>
</li>
</ol>
<h3><strong>Configure an Alerting Policy and Notification</strong></h3>
<ol start="6">
<li>Click <strong>Create Alert Policy</strong>.</li>
</ol>
<p><img alt="e929d9d6b9a89fa3.png" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/NFfxn9_RTXbrm7XcsB8ktD4hL7DxftBOOxsGWaZ++3Q="></p>
<ol start="7">
<li>
<p>Go to <strong>Metric</strong> tab, give a display name in the <strong>Untitled Condition</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
<h3><strong>Configure notifications and finish the alerting policy</strong></h3>
<ol start="9">
<li>In Notifications, click the dropdown next to the  <strong>Notifications Channel Type</strong>.</li>
<li>Select <strong>Email</strong> as the notification channel, and enter a valid email address.</li>
<li>Click <strong>Add notification Channel.</strong>
</li>
<li>Skip the Documentation step.</li>
<li>For <strong>Name this policy</strong>, type a name for the policy.</li>
</ol>
<p><strong>Note</strong>: Policy names are used as subjects in notification emails, so use that to your advantage.</p>
<ol start="14">
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ol>
<h2 id="step11">Configure a dashboard with a couple of useful charts.</h2>
<h3><strong>Configure a Dashboard</strong></h3>
<ul>
<li>On the Stackdriver window or tab, click on <strong>Dashboards</strong> &gt; <strong>Create Dashboard.</strong>
</li>
<li>Click on the <em>Untitled Dashboard</em> and give it a name like <strong>ArchDP Dash</strong>.</li>
<li>Click <strong>Add Chart</strong>.</li>
</ul>
<table>
<tbody><tr>
<td colspan="1" rowspan="1">
<p><strong>Property</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>Value</strong></p>
<p>(type value or select option as specified)</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Title</p>
</td>
<td colspan="1" rowspan="1">
<p>&lt; leave blank to allow the default name &gt;</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Resource Type</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>GCE VM Instance</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Metric Type</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>CPU usage</strong></p>
</td>
</tr>
</tbody></table>
<ul>
<li>Click  <strong>Save.</strong>
</li>
<li>Click <strong>Add Chart</strong> and add another chart to the dashboard with the following properties:</li>
</ul>
<table>
<tbody><tr>
<td colspan="1" rowspan="1">
<p><strong>Property</strong></p>
</td>
<td colspan="1" rowspan="1">
<p><strong>Value</strong></p>
<p>(type value or select option as specified)</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Title</p>
</td>
<td colspan="1" rowspan="1">
<p>&lt;allow the default name&gt;</p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Resource Type</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>GCE VM Instance</strong></p>
</td>
</tr>
<tr>
<td colspan="1" rowspan="1">
<p>Metric Type</p>
</td>
<td colspan="1" rowspan="1">
<p><strong>Received packets</strong></p>
</td>
</tr>
</tbody></table>
<ul>
<li>
<p>Click  <strong>Save.</strong></p>
</li>
</ul>
<h2 id="step12">Place a test load on the application.</h2>
<h3><strong>Create a test application in Cloud Shell.</strong></h3>
<p>In Console, return to Cloud shell or open Cloud Shell if necessary.</p>
<p>Using the Cloud Shell Code Editor, create the <strong>test-monitor1.sh</strong> file in <code>~/dmsamples/deploymentmanager-samples/examples/v2/nodejs_l7/python</code></p>
<p>Replace &lt;your forwarding IP&gt; with the forwarding IP address of the application and save the file.</p>
<p><strong>test-monitor1.sh</strong></p>
<pre><code>#!/bin/bash
for ((c=1; c&lt;=250; c++))
do
   echo "$c"
   curl -s "http://&lt;your forwarding IP&gt;:8080/"
done
</code><button class="button button--copy js-copy-button-11"><i class="fa fa-clipboard"></i></button></pre>
<p>Using the Cloud Shell, make the script executable.</p>
<pre><code>chmod +x test-monitor1.sh
</code><button class="button button--copy js-copy-button-12"><i class="fa fa-clipboard"></i></button></pre>
<p>Using the Cloud Shell, run the script several times.</p>
<pre><code>./test-monitor1.sh
</code><button class="button button--copy js-copy-button-13"><i class="fa fa-clipboard"></i></button></pre>
<p>View the results on the Dashboard in Stackdriver.</p>
<p>The minimum dashboard timeline is 1 hour. You should see the Received packets graph trend upwards after a few minutes.</p>
<p>This bash script running on Cloud Shell is not sufficient to drive autoscaling. A load testing application will be required.</p>
<h2 id="step13">Create a test VM with Apache Bench</h2>
<p>With the number of VMs launched, you have probably reached the Qwiklabs quota limit. Instead of installing Apache Bench on a VM, as you would normally do in a production environment, just install and use it from the Cloud Shell Command Line</p>
<h3><strong>Install Apache Bench on Cloud Shell</strong></h3>
<ol>
<li>
<p>Open Cloud Shell</p>
</li>
</ol>
<pre><code>cd
sudo apt-get update
sudo apt-get -y install apache2-utils
</code><button class="button button--copy js-copy-button-14"><i class="fa fa-clipboard"></i></button></pre>
<ol start="2">
<li>
<p>Use Apache Bench to apply load to the service.</p>
</li>
</ol>
<pre><code>ab -n 10000 -c 100 http://&lt;your forwarding IP&gt;:8080/
</code><button class="button button--copy js-copy-button-15"><i class="fa fa-clipboard"></i></button></pre>
<aside class="special"><p><strong>Note: </strong>You must include the trailing slash after your forwarding IP address. Otherwise you will get an error such as: "ab: invalid URL" when you run the above command.</p>
</aside>
<ol start="3">
<li>Run the above command two or three times.</li>
<li>View the results on the Dashboard in Stackdriver.</li>
<li>You can also view the instance groups in Console to see if autoscaling has been triggered. On the <strong>Navigation menu</strong>, click  <strong>Compute Engine</strong> &gt; <strong>Instance groups</strong>. Your results may look similar to the image below:</li>
</ol>
<p><img alt="8159c717188bfcb1.png" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/K7rFMdQwK4SuTif13l0+dOtmfc_g29syVrToQlwKd+Q="></p>
<h2 id="step14">Simulate a service outage.</h2>
<h3>Remove the firewall to simulate an outage.</h3>
<ol>
<li>On the <strong>Navigation menu</strong>, click  <strong>VPC Network</strong> &gt; <strong>Firewall rules</strong>.</li>
<li>As shown in the image below, select the firewall rule that is allowing TCP <strong>8080</strong> traffic, and click <strong>Delete</strong>.</li>
</ol>
<p><img alt="70290821269130cf.png" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/I8lwF_MvoMVO60x5mRZ7mZgCjTSqeKpLOPMbW6jM7TM="></p>
<ol start="3">
<li>After some time, you should receive a notification email. The notification latency setting determines how long after a policy is triggered before a notification is sent.</li>
</ol>
<p>After you receive the notification you can proceed.</p>
<h2 id="step15">Full Production</h2>
<p>You just built a full-featured full-size highly available, reliable, scalable, and resilient service. And it probably didn't feel significantly different from the much smaller services you built in the previous two labs.  That's the magic of Deployment Manager!!</p>
<h2 id="step16">Cleanup</h2>
<ol>
<li>In the <strong>Cloud Platform Console</strong>, sign out of the Google account.</li>
<li>Close the browser tab.</li>
</ol>
<h2 id="step17">End your lab</h2>
<p>When you have completed your lab, click <strong>End Lab</strong>. Qwiklabs removes the resources you’ve used and cleans the account for you.</p>
<p>You will be given an opportunity to rate the lab experience. Select the applicable number of stars, type a comment, and then click <strong>Submit</strong>.</p>
<p>The number of stars indicates the following:</p>
<ul>
<li>1 star = Very dissatisfied</li>
<li>2 stars = Dissatisfied</li>
<li>3 stars = Neutral</li>
<li>4 stars = Satisfied</li>
<li>5 stars = Very satisfied</li>
</ul>
<p>You can close the dialog box if you don't want to provide feedback.</p>
<p>For feedback, suggestions, or corrections, please use the <strong>Support</strong> tab.</p>

<p>Copyright 2019 Google LLC All rights reserved. Google and the Google logo are trademarks of Google LLC. All other company and product names may be trademarks of the respective companies with which they are associated.</p>



</div>
<div class="js-lab-content-outline lab-content__outline">
<a href="https://googlecoursera.qwiklabs.com/focuses/16469#step1">Overview</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step2">Objectives</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step3">Full Production</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step4">Clone the Deployment Manager sample templates</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step5">Explore the sample files</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step6">Customize the deployment</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step7">Run the application</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step8">Verify that the application is operational</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step9">Enable monitoring for the project</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step10">Configure an uptime check and alert policy for the application.</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step11">Configure a dashboard with a couple of useful charts.</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step12">Place a test load on the application.</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step13">Create a test VM with Apache Bench</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step14">Simulate a service outage.</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step15">Full Production</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step16">Cleanup</a><a href="https://googlecoursera.qwiklabs.com/focuses/16469#step17">End your lab</a>
</div>
</div>

</div>


</div>
</div>
<div class="lab-introduction js-lab-introduction is-hidden">
<div class="lab-introduction__inner">
<h1 class="headline-1">Welcome to Your First Lab!</h1>
<ql-icon-button class="js-skip-button">close</ql-icon-button>
<div class="lab-introduction__video">
<iframe allow="autoplay; encrypted-media" allowfullscreen="" frameborder="0" id="lab-introduction" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/yF7EDXKTmoQ.html"></iframe>
</div>
<a class="js-skip-button button button--outline">Skip this video</a>
</div>
</div>



</div>
</main>
<div class="modal fade" id="lab-details-modal">
<div class="modal-container">
<div class="mdl-shadow--24dp modal-content">
<div class="modal-body">
<p class="l-mbm">
In this lab you will use Deployment Manager to launch a highly available, scalable, reliable, resilient service. You will monitor it using Stackdriver. You will set up basic black box monitoring,  uptime check alert notification and dashboard.
</p>
<p class="small-label l-mbs">
<strong>
Duration:
</strong>
0m setup
·
90m access
·
90m completion
</p>
<p class="small-label l-mbs">
<span><strong>Levels: </strong>advanced</span>
</p>
<p class="small-label">
<strong>
Permalink:
</strong>
<a href="https://googlecoursera.qwiklabs.com/catalog_lab/1006">https://googlecoursera.qwiklabs.com/catalog_lab/1006</a>
</p>
</div>
<div class="modal-actions">
<a class="mdl-button mdl-button--primary mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" data-upgraded=",MaterialButton,MaterialRipple">
Got It
<span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></a>
</div>


</div>
</div>
<iframe class="l-ie-iframe-fix" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/saved_resource(1).html"></iframe>
</div>
<div class="modal fade" id="lab-review-modal">
<div class="modal-container">
<div class="mdl-shadow--24dp modal-content">
<form class="simple_form js-lab-review-form" id="new_lab_review" action="https://googlecoursera.qwiklabs.com/lab_reviews" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="✓"><div class="modal-body">
<p class="label">
How satisfied are you with this lab?*
</p>
<div class="rateit js-rateit" data-rateit-max="5" data-rateit-min="0" data-rateit-resetable="false" data-rateit-step="1" data-rateit-value="0"><div class="rateit-reset" style="display: none;"></div><div class="rateit-range" style="width: 80px; height: 16px;"><div class="rateit-selected" style="height: 16px; width: 0px;"></div><div class="rateit-hover" style="height:16px"></div></div></div>
<div class="l-mtm">

<div class="control-group hidden lab_review_user_id"><div class="controls"><input class="hidden" type="hidden" value="2332914" name="lab_review[user_id]" id="lab_review_user_id"></div></div>
<div class="control-group hidden lab_review_classroom_id"><div class="controls"><input class="hidden" type="hidden" value="1983" name="lab_review[classroom_id]" id="lab_review_classroom_id"></div></div>
<div class="control-group hidden lab_review_lab_id"><div class="controls"><input class="hidden" type="hidden" value="1006" name="lab_review[lab_id]" id="lab_review_lab_id"></div></div>
<div class="control-group hidden lab_review_focus_id"><div class="controls"><input class="hidden" type="hidden" value="16469" name="lab_review[focus_id]" id="lab_review_focus_id"></div></div>
<div class="control-group hidden lab_review_rating"><div class="controls"><input class="hidden js-rating-input" type="hidden" name="lab_review[rating]" id="lab_review_rating"></div></div>
<div class="control-group text optional lab_review_comment"><label class="text optional control-label" for="lab_review_comment">Comment</label><div class="controls"><textarea class="text optional" name="lab_review[comment]" id="lab_review_comment"></textarea></div></div>
</div>
</div>
<div class="modal-actions">
<a class="mdl-button mdl-button--primary mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" data-upgraded=",MaterialButton,MaterialRipple">
Cancel
<span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></a>
<input type="submit" name="commit" value="Submit" disabled="disabled" class="btn mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--primary" id="submit" data-disabled="false" data-disable-with="Submit" data-upgraded=",MaterialButton,MaterialRipple"><span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></input>
</div>
</form>

</div>
</div>
<iframe class="l-ie-iframe-fix" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/saved_resource(2).html"></iframe>
</div>

<script>
  $( function() {
    ql.initMaterialInputs();
    initChosen();
    initSearch();
    initTabs();
    ql.list.init();
    ql.favoriting.init();
    ql.header.myAccount.init();
    initTooltips();
    ql.autocomplete.init();
    ql.modals.init();
    ql.toggleButtons.init();
    ql.analytics.init();
    initLabContent( );
  ql.labOutline.links.init();
  ql.labOutline.layout.init();
  initLabReviewModal();
  ql.labAssessment.init();
  ql.labIntroduction.init( true );
  ql.labData.init();
  initLabTranslations( {"are_you_sure":"All done? If you end this lab, you will lose all your work. You may not be able to restart the lab if there is a quota limit. Are you sure you want to end this lab?\n","in_progress":"*In Progress*","ending":"*Ending*","starting":"*Starting, please wait*","end_concurrent_labs":"Sorry, you can only run one lab at a time. To start this lab, please confirm that you want all of your existing labs to end.\n","copied":"Copied","no_resource":"Error retrieving resource.","no_support":"No Support","mac_press":"Press ⌘-C to copy","thanks_review":"Thanks for reviewing this lab.","windows_press":"Press Ctrl-C to copy","days":"days"} );
  ql.labRun.init();
  ql.initHeader();
  ql.navigation.init();
  ql.navPanel.init();
  ql.navigation.init();
  
  });
</script>
<style>
  .mdl-layout__container {
    position: static
  }
</style>


<div id="drift-widget-container" style="position: absolute; z-index: 2147483647;"><iframe id="drift-widget" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/index.html" title="Drift Messenger" role="complementary" style="border: none; display: block; height: 0px !important; width: 0px !important; position: fixed; top: auto; left: auto; bottom: 0px; right: 0px; visibility: hidden; z-index: 2147483647; max-height: 100vh; max-width: 100vw; transition: none 0s ease 0s; background: none transparent; opacity: 1; pointer-events: auto; touch-action: auto;" class="drift-widget-hidden"></iframe></div><iframe data-product="web_widget" title="No content" tabindex="-1" aria-hidden="true" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/saved_resource(3).html" style="width: 0px; height: 0px; border: 0px; position: absolute; top: -9999px;"></iframe><div><iframe title="Opens a widget where you can chat to one of our agents" id="launcher" tabindex="0" class="zEWidget-launcher zEWidget-launcher--active" style="border: none; background: transparent; z-index: 999998; transform: translateZ(0px); position: fixed; transition-duration: 250ms; transition-timing-function: cubic-bezier(0.645, 0.045, 0.355, 1); transition-property: opacity, top, bottom; opacity: 1; height: 50px; max-height: 551px; min-height: 50px; margin: 10px 20px; right: 0px; bottom: 0px; width: 112px;width: 112px;" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/saved_resource(4).html"></iframe></div><div><iframe title="Find more information here" id="webWidget" tabindex="-1" class="zEWidget-webWidget " style="border: none; background: transparent; z-index: 999999; transform: translateZ(0px); position: fixed; transition-duration: 250ms; transition-timing-function: cubic-bezier(0.645, 0.045, 0.355, 1); transition-property: opacity, top, bottom; opacity: 0; width: 357px; height: 100%; max-height: 565px; min-height: 150px; margin-left: 8px; margin-right: 8px; top: -9999px; visibility: hidden;" src="./Deployment Manager_ Full Production + (Stackdriver) _ Qwiklabs_files/saved_resource(5).html"></iframe></div></body></html>